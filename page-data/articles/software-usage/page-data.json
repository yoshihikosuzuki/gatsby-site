{"componentChunkName":"component---src-templates-post-template-js","path":"/articles/software-usage","result":{"data":{"markdownRemark":{"id":"06cce5e2-2378-5430-8ab3-77aa72e95bc1","html":"<h2 id=\"データ変換\" style=\"position:relative;\"><a href=\"#%E3%83%87%E3%83%BC%E3%82%BF%E5%A4%89%E6%8F%9B\" aria-label=\"データ変換 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>データ変換</h2>\n<h3 id=\"bax-→-fasta\" style=\"position:relative;\"><a href=\"#bax-%E2%86%92-fasta\" aria-label=\"bax → fasta permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bax → fasta</h3>\n<ul>\n<li>SMRTLink: <code class=\"language-text\">bax2bam</code> → <code class=\"language-text\">bam2fasta</code></li>\n<li>DEXTRACTOR: <code class=\"language-text\">dextract</code></li>\n</ul>\n<h2 id=\"配列アラインメント\" style=\"position:relative;\"><a href=\"#%E9%85%8D%E5%88%97%E3%82%A2%E3%83%A9%E3%82%A4%E3%83%B3%E3%83%A1%E3%83%B3%E3%83%88\" aria-label=\"配列アラインメント permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>配列アラインメント</h2>\n<h3 id=\"bowtie2\" style=\"position:relative;\"><a href=\"#bowtie2\" aria-label=\"bowtie2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"http://bowtie-bio.sourceforge.net/bowtie2/index.shtml\" target=\"_blank\" rel=\"noopener noreferrer\">Bowtie2</a></h3>\n<ul>\n<li>\n<p>インデックス作成</p>\n<ul>\n<li><code class=\"language-text\">.bt2</code>ファイルが 6 つ生成される(<code class=\"language-text\">TARGET_FASTA</code>が大きい場合は<code class=\"language-text\">.bt2l</code>になる)</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bowtie2-build -f TARGET_FASTA INDEX_NAME</code></pre></div>\n<ul>\n<li>マッピング(single-end read)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bowtie2 -p THREAD_NUM -x INDEX_NAME -U QUERY_FASTQ -S OUT_SAM_FILE</code></pre></div>\n<ul>\n<li>マッピング(paired-end read)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bowtie2 -p THREAD_NUM -x INDEX_NAME -1 QUERY_FASTQ_1 -2 QUERY_FASTQ_2 -S OUT_SAM_FILE</code></pre></div>\n<ul>\n<li>\n<p>その他オプション</p>\n<ul>\n<li><code class=\"language-text\">-N</code>: アラインメントのミスマッチ許容数(<code class=\"language-text\">0</code>または<code class=\"language-text\">1</code>を指定、デフォルトは<code class=\"language-text\">0</code>)</li>\n<li><code class=\"language-text\">-L</code>: seed 長(デフォルトは<code class=\"language-text\">20</code>)</li>\n<li><code class=\"language-text\">-i</code>: seed window 長</li>\n<li><code class=\"language-text\">--no-unal</code>: アラインメントされなかったものを sam ファイルに出力しない</li>\n</ul>\n</li>\n<li>\n<p>ユニークマッピングだけに限定したい場合は、出力 sam ファイル中の<code class=\"language-text\">XS</code>を含む行を<code class=\"language-text\">grep</code>等で除けばよい</p>\n<ul>\n<li>これは例えば 1 つの高 MAPQ アラインメントとその他の低 MAPQ アラインメントが存在する時に不自然なので、MAPQ によるフィルターの方が自然</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"bwa\" style=\"position:relative;\"><a href=\"#bwa\" aria-label=\"bwa permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"http://bio-bwa.sourceforge.net/\" target=\"_blank\" rel=\"noopener noreferrer\">BWA</a></h3>\n<ul>\n<li>\n<p>インデックス作成</p>\n<ul>\n<li><code class=\"language-text\">TARGET_FASTA</code>が大きい時は<code class=\"language-text\">-a bwtsw</code>にする</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bwa index -a is TARGET_FASTA</code></pre></div>\n<ul>\n<li>マッピング(single-end read)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bwa aln -t THREAD_NUM TARGET_FASTA QUERY_FASTQ <span class=\"token operator\">></span> OUT_SAI_FILE\n$ bwa samse TARGET_FASTA OUT_SAI_FILE QUERY_FASTQ <span class=\"token operator\">></span> OUT_SAM_FILE</code></pre></div>\n<ul>\n<li>マッピング(paired-end read)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bwa aln -t THREAD_NUM TARGET_FASTA QUERY_FASTQ_1 <span class=\"token operator\">></span> OUT_SAI_FILE_1\n$ bwa aln -t THREAD_NUM TARGET_FASTA QUERY_FASTQ_2 <span class=\"token operator\">></span> OUT_SAI_FILE_2\n$ bwa sampe TARGET_FASTA OUT_SAI_FILE_1 OUT_SAI_FILE_2 QUERY_FASTQ_1 QUERY_FASTQ_2 <span class=\"token operator\">></span> OUT_SAM_FILE</code></pre></div>\n<h3 id=\"samtools\" style=\"position:relative;\"><a href=\"#samtools\" aria-label=\"samtools permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/samtools/samtools\" target=\"_blank\" rel=\"noopener noreferrer\">Samtools</a></h3>\n<ul>\n<li>sam -> bam</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ samtools view -@ THREAD_NUM -bS OUT_SAM_FILE <span class=\"token operator\">></span> OUT_BAM_FILE\n$ samtools <span class=\"token function\">sort</span> -@ THREAD_NUM OUT_BAM_FILE -o OUT_SORTED_BAM_FILE</code></pre></div>\n<h2 id=\"ゲノムブラウザ\" style=\"position:relative;\"><a href=\"#%E3%82%B2%E3%83%8E%E3%83%A0%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6\" aria-label=\"ゲノムブラウザ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ゲノムブラウザ</h2>\n<h3 id=\"smrt-view\" style=\"position:relative;\"><a href=\"#smrt-view\" aria-label=\"smrt view permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"http://files.pacb.com/software/smrtanalysis/2.3.0/doc/smrtview/help/Webhelp/whnjs.htm\" target=\"_blank\" rel=\"noopener noreferrer\">SMRT View</a></h3>\n<ul>\n<li><a href=\"https://github.com/PacificBiosciences/DevNet/wiki/SMRT-View\" target=\"_blank\" rel=\"noopener noreferrer\">ここ</a>からダウンロード -> <code class=\"language-text\">bin/</code>に移動して<code class=\"language-text\">$ ./linux_configure</code> (<code class=\"language-text\">SEYMOUR_PATH</code>とかは気にしなくてよい) でインストール</li>\n<li>\n<p>起動</p>\n<ul>\n<li><code class=\"language-text\">-X</code>で ssh 接続し、<code class=\"language-text\">$ ./smrtanalysis start</code>で SMRT View のサーバを起動</li>\n<li>readme の<code class=\"language-text\">smrtanalysis/smrtanalysis</code>は、Tomcat Manager Application の username/password のことだが特に必要はない</li>\n<li>サーバを停止させたいときは<code class=\"language-text\">$ ./smrtanalysis stop</code></li>\n<li><code class=\"language-text\">$ ./smrtview -s</code>で stand alone mode で SMRT View を起動</li>\n<li><code class=\"language-text\">metadata.rdf</code>を直接<code class=\"language-text\">-m</code>オプションで渡して起動してもよいと思われる</li>\n</ul>\n</li>\n<li>\n<p>解析の流れ</p>\n<ul>\n<li><code class=\"language-text\">metadata.rdf</code>を指定 -> reference の指定が正しければ<code class=\"language-text\">OK</code></li>\n<li><code class=\"language-text\">Genome</code>タブの<code class=\"language-text\">sort contigs by length</code>を ON にする</li>\n<li><code class=\"language-text\">Base Mods</code>を ON にする</li>\n<li><code class=\"language-text\">Add Tracks</code>から<code class=\"language-text\">modifications.gff</code>を追加</li>\n<li><code class=\"language-text\">Options</code>で<code class=\"language-text\">Base Modifications -&gt; Base Annotations Type</code>を<code class=\"language-text\">Raw IPD</code>に指定</li>\n<li><code class=\"language-text\">Add Tracks</code>から<code class=\"language-text\">motifs.gff</code>を追加</li>\n<li>もしあれば<code class=\"language-text\">Add Tracks</code>から<code class=\"language-text\">variants.gff</code>を追加</li>\n<li>Pilon した contig を reference とするなら通常は存在しない</li>\n<li><code class=\"language-text\">Details</code>の track name を右クリックして<code class=\"language-text\">Zoom to Base</code>を指定すれば 1 塩基単位で観察できる</li>\n<li><code class=\"language-text\">&lt;-</code>、<code class=\"language-text\">-&gt;</code>で領域移動可能</li>\n<li>ズームアウトすると表示されなくなるのでそのときはもう一度<code class=\"language-text\">Zoom to Base</code>する</li>\n<li>Region、Detail panel を独立に表示させたいときは、<code class=\"language-text\">Windows -&gt; Link Genome and Region Panels / Link Region and Details Panels</code>を変更</li>\n<li>見たい領域が分かっている場合には、<code class=\"language-text\">Tools -&gt; Go To Location</code>もしくはツールバーの<code class=\"language-text\">Go To</code>で領域を指定できる</li>\n<li>Region および Details はそれらが独立に表示できるときだけ指定できる</li>\n<li><code class=\"language-text\">+</code>キーでズームイン、<code class=\"language-text\">-</code>キーでズームアウトできる</li>\n<li><code class=\"language-text\">&lt;-</code>と<code class=\"language-text\">-&gt;</code>キーで領域をスクロールできる</li>\n</ul>\n</li>\n<li>\n<p>GFF3、GTF、VCF ファイルを annotation として外部から追加できる</p>\n<ul>\n<li>reference contig の名前と同じ名前が使われていなければならない</li>\n<li>GFF3 だと最初の列で指定される</li>\n</ul>\n</li>\n<li><code class=\"language-text\">File -&gt; Export Graphics</code>で、pdf または png 形式のグラフィックファイルを出力できる</li>\n<li><code class=\"language-text\">File -&gt; Export Data</code>で GFF3 形式のデータファイルを出力できる</li>\n</ul>\n<h2 id=\"ゲノムアセンブリ\" style=\"position:relative;\"><a href=\"#%E3%82%B2%E3%83%8E%E3%83%A0%E3%82%A2%E3%82%BB%E3%83%B3%E3%83%96%E3%83%AA\" aria-label=\"ゲノムアセンブリ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ゲノムアセンブリ</h2>\n<h3 id=\"quiver\" style=\"position:relative;\"><a href=\"#quiver\" aria-label=\"quiver permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/PacificBiosciences/GenomicConsensus\" target=\"_blank\" rel=\"noopener noreferrer\">Quiver</a></h3>\n<ul>\n<li>リードは CRF でモデル化されており、さらに追加で QV profile の情報を与えることによって、より高精度のコンセンサスを可能にしている</li>\n<li>\n<p>十分な coverage が得られなかった領域の出力形式は、<code class=\"language-text\">--noEvidenceConsensusCall</code>オプションで指定できる</p>\n<ul>\n<li><code class=\"language-text\">nocall</code>: NNNN</li>\n<li><code class=\"language-text\">reference</code>: ACGT</li>\n<li><code class=\"language-text\">lowercasereference</code>[default]: acgt</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"リピート検出\" style=\"position:relative;\"><a href=\"#%E3%83%AA%E3%83%94%E3%83%BC%E3%83%88%E6%A4%9C%E5%87%BA\" aria-label=\"リピート検出 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>リピート検出</h2>\n<h3 id=\"trf\" style=\"position:relative;\"><a href=\"#trf\" aria-label=\"trf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://tandem.bu.edu/trf/trfdesc.html\" target=\"_blank\" rel=\"noopener noreferrer\">TRF</a></h3>\n<h4 id=\"command-usage\" style=\"position:relative;\"><a href=\"#command-usage\" aria-label=\"command usage permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Command usage</h4>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\">Please use: trf File Match Mismatch Delta PM PI Minscore MaxPeriod [options]\n\nWhere: (all weights, penalties, and scores are positive)\n<span class=\"token constant\">  File</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> sequences input file</span>\n<span class=\"token constant\">  Match</span>  <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> matching weight</span>\n<span class=\"token constant\">  Mismatch</span>  <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> mismatching penalty</span>\n<span class=\"token constant\">  Delta</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> indel penalty</span>\n<span class=\"token constant\">  PM</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> match probability (whole number)</span>\n<span class=\"token constant\">  PI</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> indel probability (whole number)</span>\n<span class=\"token constant\">  Minscore</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> minimum alignment score to report</span>\n<span class=\"token constant\">  MaxPeriod</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> maximum period size to report</span>\n<span class=\"token selector\">  [options]</span> <span class=\"token attr-value\"><span class=\"token punctuation\">=</span> one or more of the following:</span>\n        -m        masked sequence file\n        -f        flanking sequence\n        -d        data file\n        -h        suppress html output\n        -r        no redundancy elimination\n        -l &lt;n>    maximum TR length expected (in millions) (eg, -l 3 or -l<span class=\"token attr-value\"><span class=\"token punctuation\">=</span>3 for 3 million)</span>\n                  Human genome HG38 would need -l 6\n        -ngs      more compact .dat output on multisequence files, returns 0 on success.\n                  Output is printed to the screen, not a file. You may pipe input in with\n                  this option using - for file name. Short 50 flanks are appended to .dat\n                  output.</code></pre></div>\n<ul>\n<li>\n<p>For PacBio raw reads:</p>\n<ul>\n<li>PM and PI should be 80 and 10, respectively</li>\n<li>MaxPeriod is 1 - 2000</li>\n<li>Minscore is total score of an alignment among the entire tandem repeat region</li>\n</ul>\n</li>\n<li>In the falcon cluster and the local machine, <code class=\"language-text\">trf</code> alias to run TRF is available.</li>\n</ul>\n<h4 id=\"on-centromeric-repeat-detection\" style=\"position:relative;\"><a href=\"#on-centromeric-repeat-detection\" aria-label=\"on centromeric repeat detection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>On centromeric repeat detection</h4>\n<blockquote>\n<p>TRF 4.09 and higher are able to handle centromere regions.</p>\n<p>For Human Genome release 38 (HG38), a value of 6 (meaning 6 million) is required.</p>\n</blockquote>\n<p>This value should be for search on the reference genome. How about PacBio raw reads? (Melters used TRF with them)</p>\n<h4 id=\"command-example\" style=\"position:relative;\"><a href=\"#command-example\" aria-label=\"command example permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Command example</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ trf <span class=\"token operator\">&lt;</span>fasta<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>match_score<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>mismatch_penalty<span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span>indel_penalty<span class=\"token operator\">></span> <span class=\"token number\">80</span> <span class=\"token number\">10</span> <span class=\"token operator\">&lt;</span>min_score<span class=\"token operator\">></span> <span class=\"token number\">2000</span></code></pre></div>\n<ul>\n<li>\n<p>(Match, Mismatch, Delta) = (1, 1, 1) would be diff-like scoring system? (In that case, MinScore would be around 500?)</p>\n<ul>\n<li>because match rate in PacBio is ~0.75 and the length of a region detected by datander is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo></mrow><annotation encoding=\"application/x-tex\">\\geq</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mrel\">≥</span></span></span></span> 1 Kb, thus the total score would be <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≥</mo></mrow><annotation encoding=\"application/x-tex\">\\geq</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719400000000001em;vertical-align:-0.13597em;\"></span><span class=\"mrel\">≥</span></span></span></span> 500</li>\n</ul>\n</li>\n<li><code class=\"language-text\">-d -h</code> option outputs space-delimited file instead of htmls</li>\n</ul>\n<h4 id=\"output-format-of-the-data-file\" style=\"position:relative;\"><a href=\"#output-format-of-the-data-file\" aria-label=\"output format of the data file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Output format of the data file</h4>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\">&lt;start_pos> &lt;end_pos> &lt;period_size> &lt;copy_num> &lt;consensus_size> &lt;percent_match> &lt;percent_indel> &lt;score> &lt;percent_A> &lt;percent_C> &lt;percent_G> &lt;percent_T> &lt;entropy> &lt;unit_seq> &lt;interval_seq></code></pre></div>\n<ul>\n<li>\n<p>Although Melter <em>et al</em> adopted a criterion that selects shortest &#x3C;consensus_size>, I would rather select the shortest motif <strong>among those having the highest &#x3C;score></strong>. Also, in order to extract multiple (non-overlapping) intervals, I adopted the following procedure:</p>\n<ol>\n<li>Filter out results whose &#x3C;percent_match> is less than 65</li>\n<li>Cluster each pair of results when more than 50% of the shorter interval is overlapping with the longer interval</li>\n<li>In each cluster, select a unit sequence that has the highest <score> and the shortest &#x3C;consensus_size> in the cluster</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"columns-of-the-table-in-the-html\" style=\"position:relative;\"><a href=\"#columns-of-the-table-in-the-html\" aria-label=\"columns of the table in the html permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Columns of the table in the html</h4>\n<img src=\"https://drive.google.com/uc?id=1KLtlpDwkKw2DHCly5xDf2hc9XPJEpuMl\" width=\"800px\">\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\">1. Indices of the repeat relative to the start of the sequence.\n2. Period size of the repeat.\n3. Number of copies aligned with the consensus pattern.\n4. Size of consensus pattern (may differ slightly from the period size).\n5. Percent of matches between adjacent copies overall.\n6. Percent of indels between adjacent copies overall.\n7. Alignment score.\n8. Percent composition for each of the four nucleotides.\n9. Entropy measure based on percent composition.</code></pre></div>\n<h4 id=\"format-of-the-alignment-cartoon-in-the-html\" style=\"position:relative;\"><a href=\"#format-of-the-alignment-cartoon-in-the-html\" aria-label=\"format of the alignment cartoon in the html permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Format of the alignment cartoon in the html</h4>\n<img src=\"https://drive.google.com/uc?id=1RudEXy4m3suXPUo7D-u9Kypw3caYN8Qi\" width=\"800px\">\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\">1. In each pair of lines, the actual sequence is on the top and a consensus sequence for all the copies is on the bottom. Each pair of lines is one period except for very small patterns. The 10 sequence characters before and after a repeat are shown.\n2. Symbol * indicates a mismatch.\n3. Symbol - indicates an insertion or deletion.\n4. Statistics refers to the matches, mismatches and indels overall between adjacent copies in the sequence, not between the sequence and the consensus pattern.\n5. Distances between matching characters at corresponding positions are listed as distance, number at that distance, percentage of all matches.\n6. ACGTcount is percentage of each nucleotide in the repeat sequence.\n7. Consensus sequence is shown by itself.</code></pre></div>","fields":{"slug":"/articles/software-usage","tagSlugs":null},"frontmatter":{"date":null,"description":"主にバイオインフォのソフトウエアの使い方メモ。","tags":null,"title":"ソフトウエアの使い方覚書"}}},"pageContext":{"slug":"/articles/software-usage"}}}