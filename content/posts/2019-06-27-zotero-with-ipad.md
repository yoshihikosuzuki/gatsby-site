---
title: Zotero で管理している PDF を iPad/モバイル端末から閲覧・編集する
date: "2019-06-27"
template: "post"
draft: false
slug: "zotero-with-ipad"
category: "Life style"
tags:
  - "Life style"
  - "Zotero"
description: "なるべく特定のソフトウエアに依存せずに、Zotero をパソコンとモバイル端末の両方でどう使うか。"
---

論文などの PDF ファイルを管理するための文献管理ソフトウエアにはいくつかの候補があるが、その中でも [Zotero](https://www.zotero.org/) は他のサービス (Mendelay, ReadCube Papers, Paperpile) と比べて、

1. 無料
2. 動作が軽い
3. 依存関係が少ない (= PDF の閲覧・編集・同期のいずれも任意の外部サービスを使うことができる)

という利点がある。一方で (各所で指摘されている) 欠点としては、Zotero のアプリは PC/Mac だけでしか提供されておらず、PDF ファイルをモバイル端末とスムーズに同期するのが難しい。ここでは私が Mac と iPad の間での PDF 同期をするために行き着いた方法を書く。

## Zotfile + Google Drive + Acrobat Reader

Zotero Storage という Zotero が提供するクラウド同期サービスは色々制限があるので使わない。したがって別の何らかの方法で Mac 上のファイルを iPad と共有する必要がある。ここでは Google Drive を挙げているが、以下の 3 点を満たしていればどんなものでもよい：

1. ファイルを保存するための十分な容量がある
    - 5 GB もあれば十分だろう; 1 GB では心もとない
2. パソコン上のフォルダの中身を自動で同期してくれる
    - Mac <-> クラウド <-> iPad のように同期することになる
    - ファイルの実体を (クラウド上だけでなく) パソコンのローカルに同期するオプションを ON にしておく
3. モバイル端末側で使いたい PDF リーダ (ここでは Acrobat Reader を採用) がそのクラウドストレージサービスにアクセスできる
    - Acrobat Reader なら OneDrive, Google Drive, Dropbox が簡単に紐付けできる

Zotero とクラウドストレージサービスをつなげるためには [Zotfile](http://zotfile.com/) を使う。具体的なインストールと設定のやり方は [公式のインストールマニュアル](http://zotfile.com/#how-to-install--set-up-zotfile) や [このガイド](https://www.researchgate.net/publication/325828616_Tutorial_The_Best_Reference_Manager_Setup_Zotero_ZotFile_Cloud_Storage) に従う。これを済ませると、以下の 2 つの手順で PDF ファイルが同期できるようになる：

1. パソコンの Zotero で同期したいアイテムを選択して、右クリック → `Manage Attachments` → `Rename Attachments` を実行
    - 各アイテムについて一度だけ実行すれば十分だが、複数回やってしまっても構わないので、毎回 Zotero ライブラリからアイテムを全選択して一気にやると楽
2. モバイル端末で Acrobat Reader から Google Drive 経由で同期されたファイルを開く

これを済ませておくと、Mac/iPad のどちらで PDF にアノテーションを付けても、インターネット接続があれば特に何もすることもなくもう片方に同期され反映されるようになる。

注意点としては、

- 同期するアイテムは親アイテム (=メタデータ) を持っている必要がある (一覧表示で左端に三角マークがあれば持っている)
  - もしなければ、右クリック → `Create Parent Item...` で親アイテムを作っておく

また、その他にも面倒な点・不便な点としては、

- 新しい PDF を Zotero に追加する度に、いちいち右クリック → `Rename Attachments` しないといけない
- 一般に、Zotero ライブラリのフォルダ構造をそのままクラウド上に同期することはできない (次セクションを参照)

これらに我慢できるのであれば、十分快適にデバイス間同期ができる。無料、高速、なるべく簡潔、を同時に満たす現時点で唯一のやり方だと思う。

## Zotero ライブラリでのフォルダ構造と、クラウド上に同期されるフォルダ構造について

上のやり方で Zotero にある任意のファイルを同期させることはできるが、一方でライブラリのフォルダ構造をそのまま同期することは一般にはできない。これは Zotero が SQL データベースを使ってフォルダとファイルを管理しているのに対してクラウドサービスは通常の木構造のファイル管理しかできないことによる。

zotfile を使ってパソコン → クラウドにファイルを同期する際に、オプション (`Zotfile Preferences`) でどのようなフォルダ構造・ファイル名にするかある程度自由に決めることができる。[上でも紹介したガイド]((https://www.researchgate.net/publication/325828616_Tutorial_The_Best_Reference_Manager_Setup_Zotero_ZotFile_Cloud_Storage)) に従ってその通りに設定をした場合、Zotero ライブラリ内のすべての PDF が Google Drive の指定した 1 つのフォルダに置かれる。

例えば Zotero でコレクションをいくつか作っていて、その構造を保ったままファイルを同期したい場合、Zotfile Preferences → `General Settings` → `Use subfolder defined by` を `/%c` にしてチェックを入れればコレクションごとにフォルダが作られて同期される。しかしこのやり方には大きな問題があって、

- 同一アイテムが複数コレクションに属していると、どちらか一つのフォルダにしか追加することしかできない (`Rename Attachments` した時にポップアップで聞かれる)

これはクラウドのフォルダ構造が木構造である以上どうしようもない (シンボリックリンクを使えばいけるだろうが現状ではそのような機能はない)。仕方がないので私はガイドに従いクラウドでは全 PDF を 1 つのフォルダにまとめて置いて、「構造を持たせた文献管理は Mac で、読むときは (全ファイルから検索して) iPad で」というように使い分けることで理性を保っている。

## [追記] コレクションとタグについて (結論：コレクションは使わない)

これも各所で散々言われていることだが、コレクションとタグの使い分けが曖昧すぎる、というか違いが分からない。私は以下の結論に落ち着いた：

- コレクションは一切使わず、タグだけを使う
- 左下にタグ一覧は表示できるがそれだけでは使いづらすぎるので、高度な検索 (上の方にある虫眼鏡ボタン) から検索条件を保存したものを使う。保存された検索条件はコレクションと同じように表示されて使用できる (公式も "smart collection" だと[言っている](https://www.zotero.org/support/collections_and_tags#saved_searches))。コレクションに対する「未整理のアイテム」に相当するものも、[このやり方](https://forums.zotero.org/discussion/49888/how-to-view-untagged-items)で作ることができる。

## [追記] Paperpile に移行した

数年間この方法で Zotero を使い続けたものの、Paperpile がいい感じになってきたと聞いて、結局 Paperpile に移行した。PDF ビューワが重いのがやや難点だが、モバイル端末との同期やメタデータ検索、添付ファイルの扱いがとても簡単になった。有料だが、やはり便利なサービスに乗っかるのは楽。。
